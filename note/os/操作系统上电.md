## 操作系统上电过程

从打开电源到操作系统启动是一个复杂的过程，在刚上电的时候，x86 PC 刚开机时 CPU 处于实模式，此时 CS=0xFFFF；IP=0x0000 执行BIOS（基本输入输出系统，地址 0xFFFF0）。BIOS 会将硬盘中**启动区的 512 字节数据**复制到**内存中 0x7c00** 的位置。

> 实模式的寻址方式：CS:IP = CS << 4 + IP（CS左移4位+IP），和保护模式不同。

### 第一阶段：BIOS

开机程度刷入到 ROM 芯片中，计算机上电后第一件事就是读取它，芯片中的程序称为“基本输入输出系统 BIOS”。

**1. 硬件自检**

B IOS 程序首先检查计算机是否满足运行的基本条件，检查 RAM，键盘，显示器，软硬磁盘等，叫做“硬件自检”。如果硬件出现问题，主板会发出不同的蜂鸣，启动终止。如果没有问题，屏幕会显示 CPU、内存、硬盘等信息。

**2. 启动顺序**

完成硬件自检后，BIOS 将控制权交给下一阶段的启动顺序。此时，BIOS 将控制权交给“设定启动顺序”的第一个存储设备。

**3. 主引导记录**

计算机读取磁盘中最前面 0 磁道 0 扇区的 512 个字节读入内存中的 0x7c00 处，如果这 512 字节中的最后两个字节是 0x55 和 0xAA，表明该设备可以用于启动，这块内存叫做“主引导记录MBR”。

